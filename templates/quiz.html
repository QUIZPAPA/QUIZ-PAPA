<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Quiz</title>

    <!-- Police Fredoka -->
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&display=swap" rel="stylesheet">

    <style>
        body { 
            background: #95F5A6; 
            font-family: 'Fredoka', sans-serif; 
            margin:0; 
            padding:0;
        }

        .container { 
            display: flex; 
            align-items: flex-start; 
            padding: 20px;
        }

        .logo { 
            width: 200px; 
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .zone { 
            flex: 1; 
            padding: 20px; 
        }

        button { 
            font-size: 18px; 
            padding: 12px; 
            margin: 8px 0; 
            width: 80%; 
            border: 2px solid #70d5ff;
            border-radius: 12px; 
            background-color: #b8f0ff;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        button:hover {
            background-color: #70d5ff;
            color: white;
            transform: scale(1.05);
        }

        .feedback {
            font-weight: bold;
            margin-top: 15px;
        }

        h2 { margin: 10px 0; }
        h3 { margin: 5px 0; }
    </style>

    <script>
        // Sons
        function playGood(){ new Audio("static/sounds/tada.mp3").play(); }
        function playBad(){ new Audio("static/sounds/outch.mp3").play(); }

        // Effets logo
        function scintiller(){
            let img = document.getElementById("logo");
            let i = 0;
            let interval = setInterval(()=>{
                img.style.visibility = (i%2==0)?"hidden":"visible";
                i++;
                if(i>6){ clearInterval(interval); img.style.visibility="visible"; }
            },80);
        }

        function trembler(){
            let img = document.getElementById("logo");
            let i=0;
            let interval=setInterval(()=>{
                img.style.transform = (i%2==0)?"translateX(8px)":"translateX(-8px)";
                i++;
                if(i>10){ clearInterval(interval); img.style.transform="translateX(0px)"; }
            },50);
        }

        // QUESTIONS DE TEST (à remplacer par ton themes.js)
        const themes = {
            science: [
                { question:"Quelle planète est la plus proche du Soleil ?", réponses:["Vénus","Mercure","Mars"], bonne:"Mercure", explication:"Mercure est la planète la plus proche du Soleil." },
                { question:"L'eau gèle à ?", réponses:["0°C","32°C","100°C"], bonne:"0°C", explication:"L'eau gèle à 0°C." }
            ],
            histoire: [
                { question:"Qui a découvert l'Amérique ?", réponses:["Christophe Colomb","Vasco de Gama","Magellan"], bonne:"Christophe Colomb", explication:"Christophe Colomb a découvert l'Amérique en 1492." }
            ]
        };

        let currentQuestion = 0;
        let questions = [];

        function startQuiz(){
            const theme = localStorage.getItem("theme") || "science"; 
            questions = themes[theme];
            if(!questions){ 
                alert("Thème introuvable !"); 
                return; 
            }
            showQuestion();
        }

        function showQuestion(){
            if(currentQuestion >= questions.length){
                document.getElementById("zone").innerHTML = "<h2>Quiz terminé !</h2>";
                return;
            }
            const q = questions[currentQuestion];
            let html = `<h2>${q.question}</h2>`;
            q.réponses.forEach(r => {
                html += `<button onclick="checkAnswer('${r}')">${r}</button><br>`;
            });
            html += `<div id="feedback" class="feedback"></div>`;
            document.getElementById("zone").innerHTML = html;
        }

        function checkAnswer(selected){
            const q = questions[currentQuestion];
            const feedbackDiv = document.getElementById("feedback");
            if(selected === q.bonne){
                feedbackDiv.textContent = "Bonne réponse ! ✅ " + q.explication;
                playGood();
                scintiller();
            } else {
                feedbackDiv.textContent = "Mauvaise réponse ❌ " + q.explication;
                playBad();
                trembler();
            }
            currentQuestion++;
            setTimeout(showQuestion, 1500);
        }

        window.onload = startQuiz;
    </script>
</head>

<body>
    <div class="container">
        <img src="static/images/logo.png" class="logo" id="logo">
        <div class="zone" id="zone"></div>
    </div>
</body>
</html>