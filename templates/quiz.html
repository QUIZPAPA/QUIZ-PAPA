<!DOCTYPE html>
<html>
<head>
    <title>Quiz</title>
    <style>
        body { 
            background: #95F5A6; 
            font-family: 'Comic Sans MS', cursive, sans-serif; 
            margin:0; 
            padding:0;
        }

        .container { 
            display: flex; 
            align-items: flex-start; 
            padding: 20px;
        }

        .logo { 
            width: 400px; 
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .zone { 
            flex: 1; 
            padding: 20px; 
        }

        button { 
            font-size: 18px; 
            padding: 12px; 
            margin: 8px 0; 
            width: 80%; 
            border: 2px solid #70d5ff;
            border-radius: 12px; 
            background-color: #b8f0ff;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        button:hover {
            background-color: #70d5ff;
            color: white;
            transform: scale(1.05);
        }

        .feedback {
            font-weight: bold;
            margin-top: 15px;
        }

        h2 { margin: 10px 0; }
        h3 { margin: 5px 0; }

    </style>

    <script>
        function playGood(){ new Audio("{{ url_for('static', filename='sounds/tada.mp3') }}").play(); }
        function playBad(){ new Audio("{{ url_for('static', filename='sounds/outch.mp3') }}").play(); }

        function scintiller(){
            let img = document.getElementById("logo");
            let i = 0;
            let interval = setInterval(()=>{
                img.style.visibility = (i%2==0)?"hidden":"visible";
                i++;
                if(i>6){ clearInterval(interval); img.style.visibility="visible"; }
            },80);
        }

        function trembler(){
            let img = document.getElementById("logo");
            let i=0;
            let interval=setInterval(()=>{
                img.style.transform = (i%2==0)?"translateX(8px)":"translateX(-8px)";
                i++;
                if(i>10){ clearInterval(interval); img.style.transform="translateX(0px)"; }
            },50);
        }
    </script>
</head>
<body>

<div class="container">
    <img id="logo" class="logo" src="{{ url_for('static', filename='images/logo.png') }}">

    <div class="zone">

    {% if not fin %}

        {% if feedback %}
            {% if feedback[0] == "bonne" %}
                <script>playGood(); scintiller();</script>
                <h3 style="color:green;">‚úÖ Bonne r√©ponse<br>{{ feedback[1] }}</h3>
            {% else %}
                <script>playBad(); trembler();</script>
                <h3 style="color:red;">‚ùå Mauvaise r√©ponse<br>
                Bonne r√©ponse : {{ feedback[1] }}<br>
                {{ feedback[2] }}</h3>
            {% endif %}
            <a href="/quiz"><button>‚û°Ô∏è Question suivante</button></a>

        {% else %}

            <h3>Session {{ session_actuelle }} ‚Äî Question {{ index+1 }}/{{ total }}</h3>
            <h2>{{ question.question }}</h2>

            <form method="post">
                {% for r in reponses %}
                    <button name="reponse" value="{{ r }}">{{ r }}</button>
                {% endfor %}
            </form>

        {% endif %}

    {% else %}

        <h2>Session termin√©e</h2>
        <a href="/"><button>üè† Retour accueil</button></a>

    {% endif %}

    </div>
</div>

</body>
</html>